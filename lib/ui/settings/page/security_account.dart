import 'package:aiviewcloud/ui/settings/page/two_steps_auth.dart';
import 'package:aiviewcloud/ui/settings/widget/bottom_sheet_fingerprint.dart';
import 'package:aiviewcloud/ui/settings/widget/item_security.dart';
import 'package:aiviewcloud/utils/locale/app_localization.dart';
import 'package:aiviewcloud/widgets/screen_widget.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:flutter_svg/flutter_svg.dart';

class SecurityAccount extends StatefulWidget {
  const SecurityAccount({Key? key}) : super(key: key);

  @override
  _SecurityAccountState createState() => _SecurityAccountState();
}

class _SecurityAccountState extends State<SecurityAccount> {
  Widget body() {
    return Column(
      children: [
        ItemSecurity(
          title: AppLocalizations.of(context).translate('login_by_finger'),
          switchButton: true,
          type: optionType.FINGER_PRINT,
          onClickSwitch: (value) {
            showFingerprintDialog(context);
          },
        ),
        ItemSecurity(
          title: AppLocalizations.of(context).translate('twostep'),
          switchButton: false,
          type: optionType.AUTH2STEP,
          onClick: () {
            Navigator.push(context,
                MaterialPageRoute(builder: (context) => TwoStepAuth()));
          },
        ),
        ItemSecurity(
          title: AppLocalizations.of(context).translate('delete_account'),
          switchButton: false,
          type: optionType.DELETE_ACCOUNT,
        )
      ],
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        backgroundColor: const Color(0xff212529),
        body: ScreenWidget(
          widget: body(),
          headerText: AppLocalizations.of(context).translate('account_secure'),
        ));
  }

  showFingerprintDialog(BuildContext context) {
    showModalBottomSheet(
        context: context,
        isScrollControlled: true,
        backgroundColor: Colors.transparent,
        builder: (context) {
          return SingleChildScrollView(
            child: Container(
              padding: EdgeInsets.only(
                  bottom: MediaQuery.of(context).viewInsets.bottom),
              child: Container(
                height: 300.h,
                child: BottomSheetFingerprint(
                  title: AppLocalizations.of(context)
                      .translate('loginbyfingerprint'),
                  titleButtonConfirm:
                      AppLocalizations.of(context).translate('understood'),
                  onClickYes: () {
                    Navigator.pop(context);
                    showConfirmDialog(context);
                  },
                ),
              ),
            ),
          );
        });
    return SizedBox.shrink();
  }

  showConfirmDialog(BuildContext context) {
    showModalBottomSheet(
        context: context,
        isScrollControlled: true,
        backgroundColor: Colors.transparent,
        builder: (context) {
          return SingleChildScrollView(
            child: Container(
              padding: EdgeInsets.only(
                  bottom: MediaQuery.of(context).viewInsets.bottom),
              child: Container(
                height: 390.h,
                child: BottomSheetFingerprint(
                  title: AppLocalizations.of(context)
                      .translate('use_finger_print'),
                  titleButtonCancel:
                      AppLocalizations.of(context).translate('cancel'),
                  icon: SvgPicture.string(
                    finger_print,
                    allowDrawingOutsideViewBox: true,
                    fit: BoxFit.fill,
                  ),
                  onClickNo: () {
                    Navigator.pop(context);
                  },
                ),
              ),
            ),
          );
        });
    return SizedBox.shrink();
  }
}

const String finger_print =
    '<svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="30" cy="30" r="30" fill="#2B2F33"/><path d="M33.0103 13.4886C30.6883 12.9094 28.2449 12.8266 25.8674 13.3399C25.6837 13.3796 25.5669 13.5607 25.6065 13.7444C25.6462 13.9282 25.8273 14.0449 26.011 14.0053C28.2879 13.5137 30.6334 13.5948 32.8643 14.1539C38.1995 15.4911 42.6403 19.5024 44.3318 24.7423C44.9859 26.7687 45.2638 28.9265 45.3194 31.1878C45.324 31.3757 45.4801 31.5243 45.668 31.5197C45.8559 31.5151 46.0045 31.359 45.9999 31.1711C45.9435 28.8787 45.6624 26.6654 44.9921 24.5721C43.2355 19.0864 38.5941 14.8814 33.0103 13.4886Z" fill="#FD7B38"/><path d="M24.1402 14.5184C24.3214 14.4684 24.4278 14.281 24.3778 14.0998C24.3278 13.9186 24.1404 13.8122 23.9592 13.8622C21.4728 14.5481 17.9751 16.9182 15.8136 20.0845C15.8127 20.0857 15.8119 20.087 15.8111 20.0882C13.9131 22.9485 12.7233 26.5429 13.0555 30.0309C13.0558 30.0342 13.0562 30.0375 13.0566 30.0408C13.1362 30.6777 13.2698 31.3134 13.4036 31.9498C13.6855 33.2903 13.968 34.6341 13.7478 35.9992C13.7178 36.1848 13.844 36.3595 14.0296 36.3894C14.2151 36.4193 14.3899 36.2932 14.4198 36.1076C14.65 34.6806 14.3642 33.2887 14.0783 31.8965C13.9461 31.2527 13.8139 30.6088 13.7327 29.9613C13.4202 26.6655 14.5456 23.2273 16.377 20.4664C18.4564 17.4217 21.8235 15.1575 24.1402 14.5184Z" fill="#FD7B38"/><path d="M28.6065 15.2788C32.8796 15.0179 37.1519 16.7618 40.0211 20.1028C40.1435 20.2454 40.1272 20.4603 39.9846 20.5828C39.842 20.7052 39.6271 20.6889 39.5046 20.5463C36.7762 17.3691 32.7107 15.7095 28.6459 15.9584C28.6445 15.9585 28.643 15.9585 28.6416 15.9586C23.5011 16.2073 18.687 19.6945 16.9163 24.581C16.8523 24.7577 16.6571 24.8491 16.4804 24.785C16.3037 24.721 16.2123 24.5258 16.2764 24.3491C18.1417 19.2014 23.1968 15.5415 28.6065 15.2788Z" fill="#FD7B38"/><path d="M41.058 21.5897C40.9532 21.4337 40.7417 21.3921 40.5856 21.4969C40.4296 21.6017 40.3881 21.8132 40.4929 21.9692C42.0834 24.3376 42.7411 26.9149 43.0011 29.9733C43.017 30.1606 43.1818 30.2995 43.3691 30.2836C43.5563 30.2677 43.6953 30.1029 43.6794 29.9156C43.4137 26.7904 42.7355 24.0875 41.058 21.5897Z" fill="#FD7B38"/><path d="M43.4518 31.3607C43.6394 31.3489 43.801 31.4915 43.8127 31.6791C43.941 33.7315 43.9422 36.0535 43.7152 37.7694C43.6905 37.9558 43.5194 38.0868 43.3331 38.0622C43.1468 38.0375 43.0157 37.8665 43.0403 37.6801C43.2592 36.0263 43.2603 33.7535 43.1334 31.7216C43.1216 31.534 43.2642 31.3724 43.4518 31.3607Z" fill="#FD7B38"/><path d="M16.4024 26.2295C16.4465 26.0468 16.3341 25.8629 16.1514 25.8188C15.9687 25.7746 15.7848 25.887 15.7407 26.0697C15.4909 27.1044 15.3612 28.1673 15.356 29.2311C15.3507 30.3277 15.5552 31.398 15.7597 32.4688C15.9271 33.3447 16.0944 34.2209 16.1471 35.1119C16.2162 36.2823 15.97 37.4545 15.5446 38.5701C15.4776 38.7457 15.5657 38.9424 15.7414 39.0094C15.917 39.0764 16.1137 38.9883 16.1806 38.8127C16.6303 37.6334 16.9029 36.3632 16.8266 35.0717C16.7743 34.1868 16.607 33.3157 16.4397 32.445C16.2355 31.3824 16.0315 30.3204 16.0367 29.2344C16.0416 28.2235 16.1649 27.2131 16.4024 26.2295Z" fill="#FD7B38"/><path d="M25.3331 18.6661C25.4032 18.8405 25.3186 19.0387 25.1441 19.1088C21.6156 20.5258 18.9659 23.7235 18.4253 27.4942C18.1995 29.0696 18.4435 30.6301 18.6874 32.1902C18.8248 33.0687 18.9621 33.9471 19.0155 34.828C19.1313 36.7381 18.9138 38.8361 17.6707 40.7451C17.5681 40.9026 17.3572 40.9471 17.1997 40.8445C17.0422 40.742 16.9977 40.5311 17.1002 40.3736C18.2328 38.6344 18.4472 36.7026 18.3361 34.8692C18.2819 33.9754 18.1454 33.0868 18.009 32.1988C17.7643 30.6055 17.5198 29.014 17.7515 27.3976C18.3287 23.3715 21.1507 19.979 24.8905 18.4771C25.0649 18.4071 25.2631 18.4917 25.3331 18.6661Z" fill="#FD7B38"/><path d="M37.2815 20.6039C34.4979 17.9966 30.4633 17.0867 26.7966 17.8909C26.613 17.9312 26.4968 18.1127 26.537 18.2963C26.5773 18.4799 26.7588 18.5961 26.9424 18.5558C30.4145 17.7943 34.2136 18.663 36.8162 21.1007C39.0099 23.1553 40.2838 26.145 40.6172 29.4068C40.6363 29.5938 40.8034 29.7299 40.9904 29.7108C41.1774 29.6916 41.3135 29.5245 41.2944 29.3375C40.9481 25.9506 39.6205 22.7946 37.2815 20.6039Z" fill="#FD7B38"/><path d="M41.2232 30.9585C41.4102 30.9393 41.5773 31.0753 41.5965 31.2623C41.9197 34.4095 41.7804 37.8088 41.2925 41.0973C41.2649 41.2832 41.0918 41.4116 40.9058 41.384C40.7199 41.3564 40.5915 41.1833 40.6191 40.9973C41.1003 37.7546 41.2358 34.413 40.9194 31.3318C40.9002 31.1448 41.0362 30.9777 41.2232 30.9585Z" fill="#FD7B38"/><path d="M29.3571 19.9171C24.1416 19.9171 19.904 24.078 19.904 29.2224C19.904 29.7719 19.9528 30.3104 20.0457 30.8339C20.0786 31.019 20.2552 31.1424 20.4403 31.1095C20.6254 31.0767 20.7488 30.9 20.7159 30.7149C20.6299 30.2302 20.5847 29.7316 20.5847 29.2224C20.5847 24.4644 24.507 20.5978 29.3571 20.5978C31.5489 20.5978 33.5515 21.3877 35.0885 22.6931C35.2318 22.8147 35.4466 22.7972 35.5682 22.6539C35.6899 22.5107 35.6724 22.2959 35.5291 22.1742C33.8728 20.7676 31.7152 19.9171 29.3571 19.9171Z" fill="#FD7B38"/><path d="M36.2917 23.4432C36.4274 23.3131 36.6428 23.3176 36.7729 23.4533C38.275 25.0196 38.7558 27.4814 39.0739 29.5474C39.4323 31.8746 39.487 34.1448 39.487 35.1975C39.487 35.3855 39.3346 35.5378 39.1466 35.5378C38.9587 35.5378 38.8063 35.3855 38.8063 35.1975C38.8063 34.1619 38.7521 31.93 38.4011 29.651C38.1058 27.733 37.68 25.3827 36.2816 23.9244C36.1515 23.7888 36.156 23.5733 36.2917 23.4432Z" fill="#FD7B38"/><path d="M39.4006 37.1467C39.4155 36.9593 39.2757 36.7953 39.0883 36.7803C38.901 36.7654 38.737 36.9052 38.722 37.0926C38.5549 39.1891 38.3365 41.2833 37.8933 43.2178C37.8513 43.401 37.9658 43.5836 38.149 43.6256C38.3323 43.6675 38.5148 43.553 38.5568 43.3698C39.0117 41.3843 39.233 39.2488 39.4006 37.1467Z" fill="#FD7B38"/><path d="M20.5936 32.0866C20.778 32.0503 20.9569 32.1703 20.9933 32.3548C21.7129 36.0092 21.2158 39.329 19.31 42.237C19.207 42.3942 18.996 42.4381 18.8388 42.3351C18.6816 42.2321 18.6377 42.0211 18.7407 41.8639C20.5338 39.1278 21.0163 35.9951 20.3254 32.4863C20.2891 32.3019 20.4091 32.1229 20.5936 32.0866Z" fill="#FD7B38"/><path d="M29.3571 22.1316C25.9716 22.1316 22.6503 24.7523 22.3113 28.0459C22.1629 29.4879 22.3714 30.9082 22.5799 32.3292C22.7621 33.5699 22.9442 34.8111 22.8889 36.0674C22.7623 38.9428 21.9187 41.3163 20.4691 43.2712C20.3571 43.4222 20.3887 43.6354 20.5397 43.7473C20.6907 43.8593 20.9039 43.8277 21.0158 43.6767C22.5533 41.6033 23.437 39.0962 23.569 36.0974C23.624 34.8467 23.4413 33.6095 23.2587 32.373C23.0499 30.9592 22.8412 29.5463 22.9884 28.1156C23.2862 25.2222 26.2644 22.8123 29.3571 22.8123C30.7996 22.8123 34.5318 23.5933 35.7189 27.4607C36.4629 29.8843 36.6658 33.1642 36.4856 36.3506C36.3055 39.5366 35.745 42.5839 34.9913 44.5379C34.9236 44.7133 35.011 44.9103 35.1863 44.978C35.3617 45.0456 35.5587 44.9583 35.6264 44.7829C36.4149 42.7385 36.9829 39.6141 37.1653 36.389C37.3476 33.1643 37.1472 29.7937 36.3697 27.261C35.0519 22.968 30.9208 22.1316 29.3571 22.1316Z" fill="#FD7B38"/><path d="M24.1194 42.2375C24.2768 42.3402 24.3212 42.5511 24.2185 42.7085C24.0075 43.0321 23.8218 43.3707 23.6361 43.7092C23.4504 44.0478 23.2647 44.3865 23.0536 44.7101C22.951 44.8676 22.7401 44.912 22.5826 44.8093C22.4252 44.7066 22.3808 44.4957 22.4835 44.3383C22.6946 44.0147 22.8802 43.6761 23.0659 43.3375C23.2516 42.9989 23.4373 42.6603 23.6484 42.3366C23.751 42.1792 23.9619 42.1348 24.1194 42.2375Z" fill="#FD7B38"/><path d="M27.0337 25.6646C27.1899 25.5601 27.2319 25.3487 27.1274 25.1925C27.0229 25.0362 26.8115 24.9943 26.6553 25.0988C25.3075 26.0002 24.4806 27.2398 24.4806 29.0558C24.4806 30.1371 24.6722 31.021 24.8687 31.9275C25.1627 33.2841 25.3621 34.6377 25.3263 36.0311C25.2827 37.7231 24.9517 39.2692 24.3153 40.7421C24.2408 40.9147 24.3202 41.115 24.4928 41.1896C24.6653 41.2641 24.8656 41.1847 24.9402 41.0121C25.6131 39.4548 25.9611 37.8224 26.0067 36.0486C26.044 34.6007 25.839 33.1935 25.5341 31.7836C25.3372 30.8731 25.1613 30.0602 25.1613 29.0558C25.1613 27.4999 25.8458 26.4591 27.0337 25.6646Z" fill="#FD7B38"/><path d="M28.3621 24.4687C29.7745 24.1808 31.2943 24.5366 32.413 25.442C34.4111 27.0594 34.6769 30.0088 34.8922 32.3989L34.9032 32.5206C35.1815 35.6015 34.863 38.5939 34.2213 41.5991C34.182 41.783 34.0012 41.9002 33.8174 41.8609C33.6335 41.8217 33.5163 41.6408 33.5556 41.457C34.1876 38.4968 34.4957 35.5756 34.2253 32.5819C34.2163 32.4827 34.2074 32.3822 34.1984 32.2805L34.1983 32.279C34.007 30.1192 33.7674 27.4141 31.9847 25.9711C31.0283 25.197 29.7166 24.8873 28.4981 25.1357C28.3139 25.1733 28.1342 25.0544 28.0966 24.8702C28.0591 24.686 28.1779 24.5063 28.3621 24.4687Z" fill="#FD7B38"/><path d="M33.7402 43.2927C33.7866 43.1105 33.6765 42.9253 33.4944 42.8789C33.3122 42.8325 33.1269 42.9426 33.0806 43.1248C32.8748 43.933 32.5578 44.6625 32.1558 45.3341C32.0592 45.4954 32.1117 45.7044 32.273 45.801C32.4343 45.8975 32.6433 45.845 32.7398 45.6837C33.1731 44.9599 33.517 44.1696 33.7402 43.2927Z" fill="#FD7B38"/><path d="M32.0759 38.3536C32.2626 38.3756 32.396 38.5449 32.3739 38.7315C32.0524 41.4479 31.3267 43.8706 30.1623 45.9718C30.0712 46.1362 29.864 46.1956 29.6996 46.1045C29.5352 46.0134 29.4758 45.8062 29.5669 45.6418C30.6813 43.6309 31.3849 41.2963 31.6979 38.6516C31.72 38.4649 31.8892 38.3315 32.0759 38.3536Z" fill="#FD7B38"/><path d="M32.0057 28.8773C31.7698 27.6165 30.6877 26.6521 29.374 26.6521C27.5951 26.6521 26.347 28.4452 26.7868 30.1134C27.531 33.0582 27.6532 35.8963 27.1494 38.6298L27.149 38.6318C26.7118 41.086 25.8723 43.2939 24.7271 45.1648C24.629 45.3251 24.6794 45.5346 24.8397 45.6328C25 45.7309 25.2095 45.6805 25.3077 45.5202C26.4997 43.5727 27.3678 41.2844 27.819 38.7522C28.3421 35.9132 28.2125 32.9756 27.4463 29.9449L27.4454 29.9413C27.1155 28.6934 28.035 27.3328 29.374 27.3328C30.3402 27.3328 31.1561 28.0436 31.3362 29.0002C31.8316 31.8738 32.0897 34.5385 31.9059 36.8329C31.8909 37.0202 32.0307 37.1843 32.218 37.1993C32.4054 37.2143 32.5695 37.0746 32.5845 36.8872C32.7749 34.5091 32.5061 31.7788 32.0066 28.8821C32.0063 28.8805 32.006 28.8789 32.0057 28.8773Z" fill="#FD7B38"/><path d="M28.3584 43.6183C28.5256 43.7042 28.5915 43.9094 28.5056 44.0766L27.6037 45.8316C27.5178 45.9988 27.3126 46.0647 27.1454 45.9788C26.9782 45.8928 26.9123 45.6877 26.9983 45.5205L27.9001 43.7654C27.986 43.5982 28.1912 43.5324 28.3584 43.6183Z" fill="#FD7B38"/><path d="M29.6271 29.2055C29.5841 29.0225 29.4009 28.909 29.218 28.952C29.035 28.995 28.9215 29.1782 28.9645 29.3612C30.1122 34.247 29.9546 38.5372 28.5565 42.1918C28.4894 42.3674 28.5773 42.5641 28.7528 42.6313C28.9284 42.6985 29.1252 42.6106 29.1923 42.435C30.65 38.6244 30.7982 34.1905 29.6271 29.2055Z" fill="#FD7B38"/></svg>';
